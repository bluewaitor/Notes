# 第4章 脚本与变量

## 4.1 命令文件

可以将任何命令放入文件中，为其设置权限，然后在Shell中输入文件名来执行其中的命令。
`chmod +x file(s)`，给`file(s)`添加执行权限。

### 注释

只要Shell碰到了特殊字符`#`，就会忽略`#`之后，直到行尾的所有字符。如果`#`出现在行首，那么这一整行都被视为注释。

## 4.2 变量

> 可以将值保存在变量中，变量名以字母或下划线`_`开头，后面可以跟上零个或多个字母及数字字符或下划线。  

> 先写变量名，紧跟上等号`=`，接着是要存入变量的值。  

注意：

1. **等号两边不能有空格！！！**
2. **Shell没有数据类型的概念，所以所有的变量Shell都将其视为字符串**
3. **变量使用前不需要声明，在用到的时候直接赋值即可。**

- 显示变量值
  `echo $variable`，字符`$`的后面如果跟的是一个或多个字母及数字字符，对Shell而言，`$`就是一个特殊字符，Shell会在执行命令前进行变量替换。**变量名也可以保存在变量中。**
- 未定义变量的值为空
  没有值的变量叫做未定义变量，其值为空（`null`）。这是没有赋过值的默认状态。当Shell执行变量替换时，为空的值会被从命令行中删除（这么做也说得通）。有时你想将某个变量的值初始化为空值，只需要把等号右侧留空就行了，例如：`dataflag=`，还可以`dataflag=''`或`dataflag=""`，效果都是一样的。
- 文件名替换与变量
  `x=*`，`echo $x`。两条命令的结果是显示当前目录下所有的文件名。**在对变量赋值时，Shell并不执行文件名替换。** 在执行`echo $x`时，严格的操作步骤如下：
  1. Shell扫描命令行，将x替换为*。
  2. Shell重新扫描命令行，遇到*后，使用当前目录下的所有文件名来替换。
  3. Shell执行echo，将文件列表作为参数传入。
  
- `${variable}`结构
  `${variable}`主要是避免歧义。比如重命名命令`mv $filename $filenameX`，Shell会把`filenameX`当成一个变量。`mv $filename ${filename}X`这样就避免了歧义。**只有在变量名的最后一个字符跟的是字母及数字字符或下划线的时候才有必要使用花括号**

## 4.3 内建的整数算术操作

算术扩展格式：`$((expression))`，其中，expression是包含Shell变量和操作符的算术表达式。可用的操作符：`+`、`-`、`*`、`/`、`%`和`**`，还有`+=`、`-=`、`*=`、`/=`、`=`，以及自增`variable++`和自减`variable--`。进制间的转换`base#number`。表达式中的空格是可选的，但是在外部进行的赋值是不能有空格。
表达式值为真，赋值`1`，假赋值`0`。
